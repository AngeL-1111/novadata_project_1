# üöÄ PROJECT 1

## üõ† –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- **Docker**
- **PostgreSQL** (Trigger)
- **ClickHouse** (MATERIALIZED VIEW)
- **DBeaver**


## üìå –≠—Ç–∞–ø—ã —Ä–∞–±–æ—Ç—ã
### 1Ô∏è‚É£ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ `docker-compose` —Ñ–∞–π–ª–∞
–ù–∞—Å—Ç—Ä–æ–∏–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏ –ø–æ–¥–Ω–∏–º–µ–º —Å–µ—Ä–≤–∏—Å—ã.
______________________________________________________________________________________
### 2Ô∏è‚É£ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL –∏ —Å–æ–∑–¥–∞–Ω–∏–µ —Å—Ö–µ–º—ã
- –£—Å—Ç–∞–Ω–æ–≤–∏–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –ë–î.
- –°–æ–∑–¥–∞–¥–∏–º –Ω–æ–≤—É—é —Å—Ö–µ–º—É.

### 3Ô∏è‚É£ –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü, —Ç—Ä–∏–≥–≥–µ—Ä–∞, cron-—à–µ–¥—É–ª–µ—Ä–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –°–æ–∑–¥–∞–¥–∏–º —Ç–∞–±–ª–∏—Ü—ã.
- –ù–∞—Å—Ç—Ä–æ–∏–º —Ç—Ä–∏–≥–≥–µ—Ä.
- –ó–∞–ø—É—Å—Ç–∏–º `cron`-—à–µ–¥—É–ª–µ—Ä.
- –ü—Ä–æ–≤–µ–¥—ë–º —Ç–µ—Å—Ç —á–µ—Ä–µ–∑ `UPDATE` —Ç–∞–±–ª–∏—Ü—ã.

### 4Ô∏è‚É£ –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ CSV
–ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–≤–µ–∂–∏–π —Å–ª–µ–ø–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ `/tmp`.

### 4Ô∏è‚É£ –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ CSV
–ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–≤–µ–∂–∏–π —Å–ª–µ–ø–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ `/tmp`.
______________________________________________________________________________________
### 5Ô∏è‚É£ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ ClickHouse —á–µ—Ä–µ–∑ DBeaver
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å ClickHouse –≤ DBeaver.
- –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –±–∞–∑ –∏ —Ç–∞–±–ª–∏—Ü.

### 6Ô∏è‚É£ –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –∏ MV
- –°–æ–∑–¥–∞—ë–º —Ç–∞–±–ª–∏—Ü—É —Å —Å—ã—Ä—ã–º–∏ –ª–æ–≥–∞–º–∏ –∏ –∞–≥—Ä–µ–≥–∞—Ü–∏–æ–Ω–Ω—É—é.
- –°–æ–∑–¥–∞—ë–º –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ (MV).
- –ù–∞–ø–æ–ª–Ω—è–µ–º —Ç–∞–±–ª–∏—Ü—É `raw` –¥–∞–Ω–Ω—ã–º–∏ –∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å MV.

### 7Ô∏è‚É£ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–∞—Å—á–µ—Ç—ã
- –†–∞—Å—á—ë—Ç –∞–≥—Ä–µ–≥–∞—Ü–∏–π –Ω–∞ —Å—ã—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö.
- –†–∞—Å—á—ë—Ç –∫—É–º—É–ª—è—Ç–∏–≤–Ω–æ–≥–æ retention 7 –¥–Ω—è.
______________________________________________________________________________________
### 8Ô∏è‚É£ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤—Å—Ç–∞–≤–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ Docker Mongo
- –°–æ–∑–¥–∞–Ω–∏–µ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—á–µ–π –æ–±–ª–∞—Å—Ç–∏ —Ñ–∞–π–ª–∞ `user_events.json`
- –°–∫—Ä–∏–ø—Ç `fix_json.py` –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–µ–≤–∞–ª–∏–¥–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö –≤ –∏—Å—Ö–æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ. –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –ø–æ–ª—É—á–µ–Ω —Ñ–∞–π–ª `user_events_fixed.json`
- –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:
  ```bash
  # –ö–æ–ø–∏—Ä—É–µ–º —Ñ–∞–π–ª –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
  docker cp user_events_fixed.json mongo_db:/user_events.json

  # –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ –≤ MongoDB
  docker exec -it mongo_db mongoimport --db my_database --collection user_events --file /user_events.json --jsonArray


### 9Ô∏è‚É£ –°–æ–∑–¥–∞–Ω–∏–µ .py —Å–∫—Ä–∏–ø—Ç–∞ –¥–ª—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç–∏
- –°–æ–∑–¥–∞—ë–º —Å–∫—Ä–∏–ø—Ç mongo_hw_task.py –∫–æ—Ç–æ—Ä—ã–π —á–∏—Ç–∞–µ—Ç –∫–æ–ª–ª–µ–∫—Ü–∏—é –∏ –¥–µ–ª–∞–µ—Ç –∞–≥—Ä–µ–≥–∞—Ü–∏—é –∫–∞–∂–¥—ã–π –¥–µ–Ω—å
______________________________________________________________________________________